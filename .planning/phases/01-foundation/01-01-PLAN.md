---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - webui/package.json
  - webui/tsconfig.json
  - webui/vite.config.ts
  - webui/index.html
  - webui/src/main.tsx
  - webui/src/App.tsx
  - webui/src-tauri/Cargo.toml
  - webui/src-tauri/tauri.conf.json
  - webui/src-tauri/src/main.rs
  - webui/src-tauri/src/lib.rs
  - webui/src-tauri/capabilities/default.json
autonomous: true

must_haves:
  truths:
    - "Running `npm run tauri dev` in webui/ launches a desktop window with React content"
    - "The Tauri app compiles without Rust errors"
    - "React hot-reload works when modifying App.tsx"
  artifacts:
    - path: "webui/package.json"
      provides: "Project dependencies and scripts"
      contains: "@tauri-apps/cli"
    - path: "webui/src-tauri/Cargo.toml"
      provides: "Rust dependencies"
      contains: "tauri"
    - path: "webui/src-tauri/tauri.conf.json"
      provides: "Tauri configuration"
      contains: "productName"
    - path: "webui/src/App.tsx"
      provides: "React root component"
      min_lines: 10
  key_links:
    - from: "webui/src/main.tsx"
      to: "webui/src/App.tsx"
      via: "import and render"
      pattern: "import App from"
    - from: "webui/src-tauri/src/main.rs"
      to: "webui/src-tauri/src/lib.rs"
      via: "run() call"
      pattern: "lib::run"
---

# Plan 01: Tauri + React Project Scaffold

## Objective

Create the Tauri 2.9.x project scaffold with React 19, TypeScript, and Vite in the `/webui/` directory.

## Context

This establishes the desktop app foundation. All subsequent work depends on this scaffold existing and working correctly. The app will eventually connect to the existing Clara backend, but this plan focuses purely on the Tauri+React shell.

**Key research findings to apply:**
- Use `npm create tauri-app@latest` for correct Tauri 2.x structure
- Tauri 2.9.x requires Rust 1.80+
- Configure capabilities for SQL plugin access from the start
- Use Vite 7 with React 19 and TypeScript 5.x

## Tasks

<task id="01.01">
<title>Create Tauri project with React template</title>
<instruction>
Run the Tauri app creation command to scaffold the project:

```bash
cd /Users/heidornj/Code/mypalclara
npm create tauri-app@latest webui -- --template react-ts --manager npm
```

This creates:
- `webui/` directory with Vite + React + TypeScript frontend
- `webui/src-tauri/` directory with Rust backend
- Pre-configured `tauri.conf.json`

After creation, verify the structure exists:
- `webui/package.json` should have `@tauri-apps/cli` in devDependencies
- `webui/src-tauri/Cargo.toml` should have tauri dependency
- `webui/src-tauri/tauri.conf.json` should exist

**Do not run `npm install` yet** - that happens in the next task.
</instruction>
<files>
- webui/package.json
- webui/tsconfig.json
- webui/vite.config.ts
- webui/index.html
- webui/src/main.tsx
- webui/src/App.tsx
- webui/src/App.css
- webui/src-tauri/Cargo.toml
- webui/src-tauri/Cargo.lock
- webui/src-tauri/tauri.conf.json
- webui/src-tauri/build.rs
- webui/src-tauri/src/main.rs
- webui/src-tauri/src/lib.rs
- webui/src-tauri/capabilities/default.json
</files>
</task>

<task id="01.02">
<title>Install dependencies and verify build</title>
<instruction>
Install npm dependencies and verify the app builds:

```bash
cd /Users/heidornj/Code/mypalclara/webui
npm install
```

Then verify Rust compilation:

```bash
cd src-tauri
cargo check
cd ..
```

If cargo check fails with missing dependencies, ensure Rust 1.80+ is installed:
```bash
rustc --version  # Should be 1.80.0 or higher
```

**Do not run `tauri dev` yet** - configuration needs to be updated first.
</instruction>
<files>
- webui/node_modules/
- webui/package-lock.json
- webui/src-tauri/Cargo.lock
</files>
</task>

<task id="01.03">
<title>Configure Tauri app identity and capabilities</title>
<instruction>
Update `webui/src-tauri/tauri.conf.json` to set the app identity:

```json
{
  "$schema": "https://schema.tauri.app/config/2",
  "productName": "MyPalClara",
  "version": "0.1.0",
  "identifier": "com.mypalclara.desktop",
  "build": {
    "beforeDevCommand": "npm run dev",
    "devUrl": "http://localhost:1420",
    "beforeBuildCommand": "npm run build",
    "frontendDist": "../dist"
  },
  "app": {
    "windows": [
      {
        "title": "MyPalClara",
        "width": 1200,
        "height": 800,
        "resizable": true,
        "fullscreen": false,
        "minWidth": 800,
        "minHeight": 600
      }
    ],
    "security": {
      "csp": null
    }
  },
  "bundle": {
    "active": true,
    "targets": "all",
    "icon": [
      "icons/32x32.png",
      "icons/128x128.png",
      "icons/128x128@2x.png",
      "icons/icon.icns",
      "icons/icon.ico"
    ]
  }
}
```

Update `webui/src-tauri/capabilities/default.json` to include SQL permissions (needed for Phase 1 Plan 02):

```json
{
  "$schema": "https://schemas.tauri.app/config/2/capability",
  "identifier": "default",
  "description": "Default capabilities for the main window",
  "windows": ["main"],
  "permissions": [
    "core:default",
    "core:window:default",
    "core:window:allow-close",
    "core:window:allow-show",
    "core:window:allow-start-dragging"
  ]
}
```

Note: SQL permissions will be added in Plan 02 when the plugin is installed. Start minimal.
</instruction>
<files>
- webui/src-tauri/tauri.conf.json
- webui/src-tauri/capabilities/default.json
</files>
</task>

<task id="01.04">
<title>Update React App component with placeholder UI</title>
<instruction>
Replace the default Tauri template content in `webui/src/App.tsx` with a minimal placeholder that confirms the app is working:

```tsx
import { useState } from "react";
import "./App.css";

function App() {
  const [count, setCount] = useState(0);

  return (
    <main className="container">
      <h1>MyPalClara Desktop</h1>
      <p>Clara's collaborative knowledge workspace</p>

      <div className="card">
        <button onClick={() => setCount((count) => count + 1)}>
          Clicked {count} times
        </button>
        <p>React is working correctly.</p>
      </div>

      <p className="read-the-docs">
        Phase 1: Foundation scaffold complete
      </p>
    </main>
  );
}

export default App;
```

Update `webui/src/App.css` with minimal styles:

```css
.container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: 2rem;
  text-align: center;
}

h1 {
  font-size: 2.5rem;
  margin-bottom: 0.5rem;
}

.card {
  padding: 2rem;
  margin: 1rem 0;
}

.card button {
  padding: 0.6rem 1.2rem;
  font-size: 1rem;
  cursor: pointer;
  border-radius: 8px;
  border: 1px solid transparent;
  background-color: #1a1a1a;
  color: white;
  transition: border-color 0.25s;
}

.card button:hover {
  border-color: #646cff;
}

.read-the-docs {
  color: #888;
  font-size: 0.9rem;
  margin-top: 2rem;
}
```

This provides visual confirmation the app works without complex dependencies.
</instruction>
<files>
- webui/src/App.tsx
- webui/src/App.css
</files>
</task>

<task id="01.05">
<title>Verify dev and release builds work</title>
<instruction>
Run the development server to confirm everything works:

```bash
cd /Users/heidornj/Code/mypalclara/webui
npm run tauri dev
```

**Expected behavior:**
1. Vite dev server starts on http://localhost:1420
2. Rust compiles the Tauri backend
3. A desktop window opens showing "MyPalClara Desktop"
4. The counter button increments when clicked
5. Modifying App.tsx triggers hot reload

After confirming dev works, test the release build:

```bash
npm run tauri build
```

**Expected behavior:**
1. Vite builds the production bundle
2. Rust compiles in release mode
3. An application bundle is created in `src-tauri/target/release/bundle/`

Note: The first build takes longer (downloading dependencies, compiling). Subsequent builds are faster.

**Common issues:**
- If Rust compile fails: check `rustc --version` is 1.80+
- If window doesn't open: check src-tauri/tauri.conf.json syntax
- If hot reload doesn't work: ensure Vite is running on port 1420

Close the app after verifying.
</instruction>
<files>
- webui/src-tauri/target/
</files>
</task>

## Verification

<verify>
- [ ] `webui/` directory exists with correct structure
- [ ] `cd webui && npm run tauri dev` launches desktop window
- [ ] Window shows "MyPalClara Desktop" title
- [ ] Counter button increments when clicked
- [ ] Modifying `App.tsx` triggers hot reload in dev mode
- [ ] `npm run tauri build` completes without errors
- [ ] Release bundle exists in `src-tauri/target/release/bundle/`
</verify>

## Success Criteria

- Tauri 2.9.x project scaffold exists in `/webui/`
- Development mode launches a working React app in a desktop window
- Release build compiles successfully
- React hot-reload works during development
- Foundation is ready for database and IPC work in Plans 02 and 03

## Output

After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md` with:
- Actual Tauri version installed
- Any deviations from the plan
- Commands used
- Time taken
